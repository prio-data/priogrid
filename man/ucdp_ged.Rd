% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_ucdp.R
\name{ucdp_ged}
\alias{ucdp_ged}
\title{Process UCDP GED Data with Temporal Fatality Distribution}
\usage{
ucdp_ged(
  ged = read_ucdp_ged(),
  violence_types = c(1, 2, 3),
  fatality_variable = "best"
)
}
\arguments{
\item{ged}{An \code{sf} object containing UCDP GED data. Defaults to
\code{\link{read_ucdp_ged}()} if not provided.}

\item{violence_types}{Integer vector specifying which types of violence to include.
Options are:
\itemize{
\item 1: State-based armed conflict
\item 2: Non-state conflict
\item 3: One-sided violence
}
Default is \code{c(1, 2, 3)} (all types).}

\item{fatality_variable}{Character string specifying which fatality estimate
to use. Options are:
\itemize{
\item "best": Best estimate of fatalities (default)
\item "low": Low estimate of fatalities
\item "high": High estimate of fatalities
\item "event_count": Count of events rather than fatalities
}}
}
\value{
A \code{SpatRaster} object with multiple layers, one for each time
interval in \code{\link{pg_date_intervals}}. Layer names correspond to
interval end dates. Cell values represent aggregated fatalities (or event
counts) for each grid cell and time period.
}
\description{
Processes UCDP GED conflict data by distributing fatalities across PRIO-GRID
temporal intervals and rasterizing the results. Events spanning multiple
time periods have their fatalities proportionally allocated based on temporal
overlap, ensuring accurate representation in panel data structures.
}
\details{
This function implements a sophisticated fatality distribution algorithm that:
\itemize{
\item Calculates the temporal overlap between each event and PRIO-GRID intervals
\item Distributes fatalities proportionally based on the number of overlapping days
\item Uses integer allocation with remainder distribution to preserve total counts
\item Handles edge cases where events span multiple periods or have single fatalities
\item Validates that distributed fatalities sum to original event totals
}

The distribution algorithm ensures that:
\itemize{
\item Total fatalities are preserved (no over- or under-counting)
\item Single-fatality events are assigned to exactly one period
\item Fractional allocations are resolved using largest remainder method
}

Events without sub-national spatial precision (where_prec >= 6) are excluded
from the final rasterization, which may result in undercounting in some regions.
}
\note{
\itemize{
\item The function requires the data.table package for efficient processing
\item Processing time scales with the number of events and time intervals
\item A warning is issued if fatality distribution validation fails
\item Events coded at national level or coarser precision are excluded
}
}
\examples{
\dontrun{
# Process all violence types with best fatality estimates
ged_raster <- ucdp_ged()

# Examine the result
print(ged_raster)

# Process state-based conflict only
state_conflict <- ucdp_ged(violence_types = 1)

# Use high fatality estimates
ged_high <- ucdp_ged(fatality_variable = "high")

# Count events instead of fatalities
event_counts <- ucdp_ged(fatality_variable = "event_count")

# Plot a single time slice
terra::plot(ged_raster[[1]],
            main = paste("UCDP GED Fatalities:", names(ged_raster)[1]))

# Calculate total fatalities across all periods
total_fatalities <- terra::app(ged_raster, sum, na.rm = TRUE)
terra::plot(total_fatalities, main = "Total Fatalities (All Periods)")
}

}
\references{
\insertRef{sundbergIntroducingUCDPGeoreferenced2013}{priogrid}

\insertRef{daviesOrganizedViolence198920242025}{priogrid}
}
\seealso{
\code{\link{read_ucdp_ged}} for loading raw UCDP GED data,
\code{\link{ged_ucdp_ged}} for the standard generator function,
\code{\link{pg_date_intervals}} for PRIO-GRID temporal structure
}
