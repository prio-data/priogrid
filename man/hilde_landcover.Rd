% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_hilde.R
\name{hilde_landcover}
\alias{hilde_landcover}
\title{Extract Land Cover Proportions from HILDE+ Data for PRIO-GRID Cells}
\usage{
hilde_landcover(landcovertype, max_cells_in_memory = (18000 * 36000 * 2))
}
\arguments{
\item{landcovertype}{Numeric. The land cover class identifier to extract from
HILDE+ data. Must be a valid land cover code according to the HILDE+
classification scheme (see Details for common codes).}

\item{max_cells_in_memory}{Numeric. Maximum number of raster cells to process
in memory at once. Default is \code{18000*36000*2} (approximately 1.3 billion
cells). Reduce this value if encountering memory limitations.}
}
\value{
A \code{SpatRaster} object (terra package) with the same structure as
PRIO-GRID, where each cell contains the proportion (0-1) of that cell covered
by the specified land cover type. The raster contains:
\itemize{
\item Values: Proportions ranging from 0 (no coverage) to 1 (full coverage)
\item Layers: One layer per year matching HILDE+ and PRIO-GRID temporal coverage
\item Layer names: Dates in YYYY-MM-DD format
}
}
\description{
Calculates the proportion of each PRIO-GRID cell covered by a specific land
cover type using HILDE+ global land use/land cover data. The function performs
spatial aggregation from high-resolution HILDE+ rasters (1km) to PRIO-GRID
cells (see \code{\link{pgoptions}}), accounting for partial coverage using area-weighted averaging.
}
\details{
This function performs several key operations:
\enumerate{
\item Downloads HILDE+ data using \code{\link{read_hilde}}
\item Creates a blank PRIO-GRID template using \code{\link{prio_blank_grid}}
\item Reprojects HILDE+ data to match PRIO-GRID projection if necessary
\item Crops HILDE+ data to PRIO-GRID extent if necessary
\item Aggregates high-resolution land cover data to PRIO-GRID cells using
area-weighted averaging
}

The aggregation uses \code{\link[exactextractr]{exact_extract}} to calculate the
proportion of each PRIO-GRID cell covered by the specified land cover type,
accounting for partial pixel overlap at cell boundaries.

HILDE+ land cover class codes (for stable categories):
\itemize{
\item 00: Ocean
\item 11: Urban
\item 22: Cropland
\item 33: Pasture/rangeland
\item 44: Forest
\item 55: Unmanaged grass/shrubland
\item 66: Sparse/no vegetation
\item 77: Water
\item 99: No data
}
}
\note{
\itemize{
\item This function can be memory-intensive due to processing high-resolution
global rasters. Reduce \code{max_cells_in_memory} if encountering
memory errors.
\item Temporary files can be created during processing but are automatically cleaned up.
}
}
\examples{
\dontrun{
# Extract cropland proportions
cropland_props <- hilde_landcover(landcovertype = 22)

# View the result
print(cropland_props)

# Plot cropland proportions for a specific year
terra::plot(cropland_props[["2000-12-31"]],
            main = "Cropland Proportion 2000")

# Extract urban area proportions with reduced memory usage
urban_props <- hilde_landcover(landcovertype = 11,
                               max_cells_in_memory = 1e8)

# Calculate summary statistics
terra::global(cropland_props[["2000-12-31"]], "mean", na.rm = TRUE)
}

}
\references{
\insertRef{winklerHILDAGlobalLand2020}{priogrid}
}
\seealso{
\code{\link{read_hilde}} for reading raw HILDE+ data,
\code{\link{prio_blank_grid}} for PRIO-GRID structure,
\code{\link[exactextractr]{exact_extract}} for spatial aggregation details,
\link{https://ceos.org/gst/HILDAplus.html}
}
